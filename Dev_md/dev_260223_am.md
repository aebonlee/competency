# MyCoreCompetency 개발일지

> **프로젝트**: 4차 산업혁명 시대 8대 핵심역량 평가 플랫폼
> **기술 스택**: React 19 + Vite 7 + Supabase + PortOne V2
> **배포**: GitHub Pages (CI/CD 자동 배포)
> **저장소**: [github.com/aebonlee/competency](https://github.com/aebonlee/competency)

---

## 개발 타임라인

| 날짜 | 커밋 수 | 내용 |
|:----:|:-------:|------|
| 2026-02-12 | 1 | `Initial commit` — 빈 리포지토리 생성 |
| 2026-02-21 | 35 | 본격 개발 시작 (세션 1 ~ 8) |
| 2026-02-22 | 24 | 고도화 및 품질 강화 (세션 9 ~ 16) |

> **실제 개발 기간: 2일 (48시간 집중 스프린트), 총 60커밋**

---

## Day 1 — 2026-02-21 (35커밋)

### 세션 1~2 (06:19 ~ 11:18) — JSP to React 전환 완료

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 06:19 | `3889a7a` | React SPA 초기 구현 (프로젝트 기반 세팅) |
| 06:20 | `47e0b0f` | CNAME 생성 (커스텀 도메인 설정) |
| 06:22~23 | `6c8800b` `aed8b29` | remote 병합 충돌 해결 |
| 06:26 | `38cab26` | GitHub Pages 자동 배포 (GitHub Actions CI/CD) |
| 08:18 | `5b45685` | Supabase 마이그레이션 (DB 스키마 적용) |
| 08:27~28 | `d267230` `30650bf` `24f7931` | .env 설정, 개발일지 업데이트, 병합 |
| 09:58 | `578bede` | 전체 페이지 디자인 통일 (`page-wrapper` 패턴) |
| 10:02 | `0d0ff34` | competency.css 누락 파일 추가 |
| 10:18 | `ea5e086` | 핵심역량/교육부 페이지 JSP 원본 복원 + 이미지 |
| 10:26 | `244e1ce` | 인라인 스타일 → CSS 클래스 리팩토링 |
| 10:43 | `09ebc0c` | **JSP→React 전환 완료** — 관리자/그룹 CRUD 11개 페이지 |
| 10:53 | `b319970` | OAuth 프로필 자동생성 + 관리자 이메일 + 누락 테이블 |
| 10:59 | `809f449` | GitHub Actions 환경변수 주입 설정 |
| 11:15 | `d3704de` | CompetencyNCS 페이지 JSP 원본 복원 |
| 11:18~25 | `85759e0` `adba470` | 세션2 개발일지 + 로고 링크/NCS 클릭 구현 |

> **세션 성과** — 49개 페이지, 53개 라우트, ~13,700줄 코드 구축 완료

### 세션 3~4 (12:55 ~ 13:26) — 종합 점검 및 UI 개선

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 12:55 | `d4f0017` | 코드 점검 보고서 작성 |
| 12:59 | `0a84338` | 세션3 개발일지 |
| 13:15 | `87f9279` | 파비콘 변경 + 회원가입 리다이렉트 + 로그인 풍선도움말 |
| 13:18~26 | `ed20a0b` `3af47ce` | 세션4 개발일지 + 전체 진행 내역 요약 |

### 세션 5~6 (14:54 ~ 17:37) — 공개 페이지 복원 및 OAuth 수정

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 14:54 | `78a9f91` | 공개 역량 페이지 3종 원본 일치 수정 |
| 15:06 | `205b744` | 세션5 개발일지 |
| 15:30 | `f7bd3b7` | OAuth 로그인 리다이렉션 수정 |
| 17:37 | `e48981f` | 세션6 개발일지 |

### 세션 7~8 (18:00 ~ 20:07) — NCS 인터랙션 및 OAuth 근본 수정

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 18:00 | `1b9f7d1` | NCS 페이지 클릭 인터랙션 JSP 원본 완전 재현 |
| 19:28 | `1197a07` | OAuth 리다이렉션 **근본 수정** + Main 풍선도움말 6개 |
| 19:32 | `253e686` | 세션8 개발일지 |
| 19:59~20:07 | `7612ed7` `1aa4aa9` | 결제카드 레이아웃 + 쿠폰 RLS 정책 수정 |

---

## Day 2 — 2026-02-22 (24커밋)

### 세션 9~10 (23:52 ~ 00:11) — 핵심 로직 구현

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 23:52\* | `c9b634a` | **56쌍 문항 자동생성 로직** + 112개 시드 데이터 |
| 00:11 | `ddb16f6` | **검사 결과 계산 구현** + 전체 사이트 점검 |

> \*2/21 23:52 시작 → 날짜 넘김

### 세션 11 (01:28 ~ 01:59) — 결과 페이지 및 차트

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 01:28 | `fd24d09` | 결과 페이지 레거시 디자인 완전 재현 (result.jsp → React) |
| 01:34 | `39617fe` | PolarArea 차트 레거시 원본 일치 |
| 01:56 | `3ef20d9` | PolarArea 차트 beginAtZero 복원 |
| 01:59 | `4f7fb88` | 세션11 개발일지 |

### 세션 12 (07:42 ~ 08:30) — DB 스키마 대수술

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 07:42~45 | `fb4c8b6` `eaf58cb` | 프로젝트 점검보고서 + 배포기록 |
| 08:30 | `2358944` | **DB 스키마 불일치 40건+ 수정** (17개 파일) |

### 세션 13 (08:55 ~ 09:01) — 관리자 대시보드

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 08:55 | `95845cf` | **관리자 대시보드 전면 재설계** — 6개 섹션, 17개 병렬 쿼리 |
| 09:01 | `b1bd2bb` | 세션13 개발일지 |

### 세션 14 (09:32 ~ 10:33) — 그룹 관리 강화

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 09:32 | `a0cef0a` | 그룹 관리자 페이지 강화 — 설정 5섹션, 통계, 서브그룹 필터 |
| 09:48 | `078382c` | 세션14 개발일지 |
| 09:59 | `b8f4ce7` | 그룹 생성 기능 + 역할별 리다이렉트 수정 |
| 10:33 | `32ec9ca` | 관리자 이메일 추가 |

### 세션 15 (13:43 ~ 13:48) — 심층 분석 및 버그 수정

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 13:43 | `b5b9cb8` | **Critical/High 버그 5건 수정** (ResultAvg, 쿠폰보안, 소프트삭제, 테이블명, 캐스케이드삭제) |
| 13:45~48 | `c0687b1` `2830768` | 세션15 개발일지 + 배포기록 |

### 세션 16 (14:09 ~ 14:53) — 품질 강화

| 시각 | 커밋 | 작업 내용 |
|:----:|:----:|-----------|
| 14:09 | `889e6d4` | 코드 스플리팅, ErrorBoundary, 404, SEO, DB 스키마 |
| 14:19 | `9730116` | GA 추적 + 결제 검증 수정 + 접근성(a11y) 개선 |
| 14:52 | `47a3c20` | **RLS 보안 + TypeScript 전환 + Vitest 테스트** |
| 14:53 | `db3a3a4` | 세션16 후속 개발일지 |

---

## 미개발 / 미완성 분석

### 버그 — 8건

#### Critical (2건)

| # | 파일 | 문제 | 영향 |
|:-:|------|------|------|
| BUG-01 | `admin/UserInfo.jsx:10` | 라우트 파라미터 `id` vs `userId` 불일치 | 사용자 상세 페이지 **작동 불가** |
| BUG-05 | `admin/BoardForm.jsx` | `useParams()` 미사용, 항상 INSERT 실행 | 게시글 **수정 불가** (항상 신규 생성) |

#### High (4건)

| # | 파일 | 문제 | 영향 |
|:-:|------|------|------|
| BUG-02 | `App.jsx:140` vs `GroupMain.jsx:173` | `/group/invite` vs `/group/invitation` 경로 불일치 | 그룹 초대 링크 **404** |
| BUG-03 | `admin/QuestionList.jsx:165` | `/admin/questions/:id/edit` 라우트 **미등록** | 문항 수정 **불가** |
| BUG-04 | `admin/EvalManager.jsx:164` | `/admin/results/:id` 라우트 **미등록** | 결과 상세보기 **불가** |
| BUG-06 | `admin/MailForm.jsx:44-65` | DB 저장만 하고 **실제 이메일 발송 없음** | 메일 기능 **미작동** |

#### Medium (2건)

| # | 파일 | 문제 | 영향 |
|:-:|------|------|------|
| BUG-07 | `GroupUserResult.jsx` vs `Result.jsx` | `score_1` vs `point1` 컬럼명 불일치 | 한쪽 점수 **0/undefined** 표시 |
| BUG-08 | 그룹 페이지 전반 | `profiles` vs `user_profiles` 테이블명 혼재 | 쿼리 실패 가능 |

### 미구현 기능 — 5건

| # | 기능 | 현 상태 | 필요 작업 |
|:-:|------|---------|-----------|
| F-01 | 이메일 발송 | MailForm이 DB 저장만 수행 | Supabase Edge Function 또는 외부 SMTP 연동 |
| F-02 | 서버사이드 결제 금액 검증 | 클라이언트 금액 하드코딩 (`25000`) | Edge Function에서 DB 금액 대조 로직 보강 |
| F-03 | 환불 처리 | `purchases` 테이블에 상태값만 존재 | 실제 PG사 환불 API 호출 로직 구현 |
| F-04 | 비밀번호 재설정 완료 | ForgotPassword에서 이메일 전송까지만 | 재설정 링크 콜백 페이지 구현 |
| F-05 | 설문조사 응답 수집 | 관리자 페이지만 존재 | **사용자 측 설문 응답 페이지 신규 구현** |

### 누락 라우트 — 3건

| 링크 출처 | 대상 경로 | 상태 |
|-----------|-----------|:----:|
| `QuestionList.jsx:165` | `/admin/questions/:id/edit` | 미등록 |
| `EvalManager.jsx:164` | `/admin/results/:id` | 미등록 |
| `GroupMain.jsx:173` | `/group/invitation` | 경로 불일치 (`/group/invite`로 등록됨) |

---

## 테스트 및 코드 품질

### 테스트 커버리지 (< 5%)

| 파일 | 테스트 수 | 상태 |
|------|:---------:|------|
| `auth.test.ts` | 5 | 스텁 — Supabase 미설정 시 fallback만 검증 |
| `supabase.test.ts` | 6 | 스텁 — localStorage fallback만 검증 |
| 나머지 전체 | 0 | 컴포넌트/페이지 테스트 없음 |

### 코드 품질 이슈

| 이슈 | 수량 | 비고 |
|------|:----:|------|
| `console.log` 잔존 | 63건 | 37개 파일에 분포, 프로덕션 로그 노출 |
| TypeScript 전환율 | ~5% | `auth.ts`, `AuthContext.tsx`만 전환 완료 |
| 관리자 이메일 하드코딩 | 3건 | `AuthContext.tsx:96`에 이메일 직접 노출 |
| 결제금액 하드코딩 | 1건 | `Checkout.jsx:31` — `const AMOUNT = 25000` |
| PortOne 자격증명 미설정 시 | 1건 | 에러 대신 데모 결제 ID 반환 (무음 실패) |

---

## 완성도 요약

```
전체 완성도   ████████████████░░░░  85%

인증/OAuth    ████████████████████  100%
평가 응시     ████████████████████  100%
결과 시각화   ████████████████████  100%
쿠폰 시스템   ████████████████████  100%
관리자 조회   ██████████████████░░   90%
그룹 관리     ██████████████████░░   90%
결제 시스템   █████████████████░░░   85%
게시판 CRUD   ████████████░░░░░░░░   60%
이메일 발송   ████████░░░░░░░░░░░░   40%
환불 처리     ██░░░░░░░░░░░░░░░░░░   10%
테스트        █░░░░░░░░░░░░░░░░░░░    5%
TypeScript    █░░░░░░░░░░░░░░░░░░░    5%
```

---

## 100% 완성까지 남은 작업

### P0 — 즉시 수정

- [ ] 8개 버그 수정 (라우트, 파라미터, 테이블명 불일치)
- [ ] 게시판 수정 기능 복구 (`BoardForm`에 `useParams` 적용)

### P1 — 핵심 기능

- [ ] 이메일 발송 연동 (Resend 또는 SendGrid + Edge Function)
- [ ] 서버사이드 결제 금액 검증 보강
- [ ] 환불 API 연동 (PortOne 환불 엔드포인트)

### P2 — 개선

- [ ] 사용자 설문 응답 페이지 구현
- [ ] `console.log` 63건 정리
- [ ] 관리자 이메일 하드코딩 제거 → DB 기반 전환

### P3 — 장기

- [ ] TypeScript 전면 전환 (JSX → TSX)
- [ ] 테스트 커버리지 확보 (핵심 로직 우선)
