# 개발일지 — 2026-02-22

## 프로젝트: MyCoreCompetency (4차 산업혁명 8대 핵심역량 검사)

---

## 1. 프로젝트 배경

MyCoreCompetency는 기존에 JSP/Tomcat 기반으로 운영되던 역량 검사 서비스를
React SPA + Supabase 기반의 모던 아키텍처로 전면 마이그레이션한 프로젝트이다.

### 마이그레이션 이유
- JSP 기반 서버사이드 렌더링 → React 클라이언트 SPA 전환
- 자체 MySQL/Oracle DB → Supabase (PostgreSQL + Auth + Edge Functions) 전환
- 서버 의존적 인증 → OAuth(Google/Kakao) + Supabase Auth 전환
- 직접 결제 모듈 → PortOne V2 SDK 전환

---

## 2. 마이그레이션 완료 내역

### 2.1 인증 시스템 (JSP → Supabase Auth)
| 기존 (JSP) | 신규 (React) | 상태 |
|------------|-------------|------|
| login.jsp / loginPro.jsp | Login.jsx + auth.js (signInWithEmail) | 완료 |
| signupForm.jsp / signupPro.jsp | Register.jsx + auth.js (signUp) | 완료 |
| forgot.jsp / findIdPw.jsp | ForgotPassword.jsx + auth.js (resetPassword) | 완료 |
| invSignupForm.jsp / invSignupPro.jsp | InviteRegister.jsx | 완료 |
| logout.jsp | AuthContext.signOut() | 완료 |
| (없음) | CompleteProfile.jsx (OAuth 프로필 완성) | 신규 |
| (없음) | Google/Kakao OAuth 로그인 | 신규 |

### 2.2 핵심역량 검사 (JSP → React + Supabase)
| 기존 (JSP) | 신규 (React) | 상태 |
|------------|-------------|------|
| extract.jsp (문항 추출 알고리즘) | supabase.js:generateQuestionPairs() | 완료 |
| evaluation.jsp (검사 화면) | Evaluation.jsx + AssessmentRadio.jsx | 완료 |
| updateEval.jsp (결과 산출) | supabase.js:calculateResults() | 완료 |
| result.jsp (결과 차트) | Result.jsx + CompetencyChart.jsx | 완료 |
| prevResult.jsp (이전 결과) | PrevResult.jsx | 완료 |
| resultAvg.jsp (통계 비교) | ResultAvg.jsx | 완료 |
| history.jsp (검사 내역) | History.jsx | 완료 |
| modal.jsp (역량 상세) | Modal.jsx + competencyInfo.js | 완료 |

### 2.3 관리자 기능 (JSP → React + Supabase)
| 기존 (JSP) | 신규 (React) | 상태 |
|------------|-------------|------|
| (sidenav.jsp 기반) | Dashboard.jsx (대시보드) | 완료 |
| userList.jsp / userInfo.jsp | UserList.jsx / UserInfo.jsx | 완료 |
| questionList.jsp / questionRegistForm.jsp | QuestionList.jsx / QuestionForm.jsx | 완료 |
| couponList.jsp / sendCoupon.jsp | CouponList.jsx | 완료 |
| statistics.jsp | Statistics.jsx | 완료 |
| surveyList.jsp / surveyForm.jsp | SurveyList.jsx | 완료 |
| svQuestionList.jsp / svQuestionRegistForm.jsp | SvQuestionList.jsx / SvQuestionForm.jsx | 완료 |
| boardList.jsp / boardRegistForm.jsp | BoardList.jsx / BoardForm.jsx / BoardView.jsx | 완료 |
| noteList.jsp / noteRegistForm.jsp | NoteList.jsx / NoteForm.jsx | 완료 |
| mailInputForm.jsp / sendMailPro.jsp | MailForm.jsx | 완료 |
| sources.jsp | Sources.jsx | 완료 |
| deleteForm.jsp | DeletedUserList.jsx | 완료 |
| (없음) | EvalManager.jsx (검사 관리) | 신규 |

### 2.4 그룹 관리 (JSP → React + Supabase)
| 기존 (JSP) | 신규 (React) | 상태 |
|------------|-------------|------|
| groupMain.jsp | GroupMain.jsx | 완료 |
| groupUserList.jsp / groupUserInfo.jsp | GroupUserList.jsx / GroupUserInfo.jsx | 완료 |
| groupUserResult.jsp | GroupUserResult.jsx | 완료 |
| groupEvalList.jsp | GroupEvalList.jsx / GroupUserEvalList.jsx | 완료 |
| groupInvitation.jsp / sendInvPro.jsp | GroupInvitation.jsx | 완료 |
| groupOrg.jsp | GroupOrg.jsx | 완료 |
| groupManager.jsp | GroupManager.jsx | 완료 |
| groupCouponList.jsp | GroupCouponList.jsx | 완료 |
| groupModifyForm.jsp / groupDeleteForm.jsp | GroupSettings.jsx | 완료 |

### 2.5 공통 UI/UX (JSP → React)
| 기존 (JSP) | 신규 (React) | 상태 |
|------------|-------------|------|
| nav.jsp / groupnav.jsp / sidenav.jsp | Navbar.jsx (통합 네비게이션) | 완료 |
| (HTML footer) | Footer.jsx | 완료 |
| intro.jsp | Home.jsx (랜딩 페이지) | 완료 |
| ganalytics.jsp | (별도 적용 필요) | 미적용 |

---

## 3. 신규 개발 항목 (React 전환 시 추가)

| 항목 | 설명 |
|------|------|
| AuthContext | 전역 인증 상태관리 (React Context API) |
| ToastContext | 전역 토스트 알림 시스템 |
| AuthGuard / AdminGuard / GroupGuard | 3단계 라우트 보호 |
| OAuth 로그인 | Google, Kakao 소셜 로그인 |
| CompleteProfile | OAuth 사용자 인구통계학적 정보 수집 |
| PortOne V2 결제 | KG이니시스 카드결제 연동 |
| 쿠폰 시스템 | 코드 기반 쿠폰 적용 |
| CSS 디자인 시스템 | CSS 변수 기반 일관된 스타일링 (11개 CSS 파일) |
| 반응형 UI | 모바일 햄버거 메뉴 + 반응형 레이아웃 |
| GitHub Pages SPA 라우팅 | 404.html + redirect script |
| localStorage 폴백 | Supabase 미설정 시 로컬 동작 |
| 데모 결제 모드 | PortOne 미설정 시 자동 demo 결제 |

---

## 4. 기술 스택 변경 요약

| 항목 | 기존 | 신규 |
|------|------|------|
| 프론트엔드 | JSP (서버사이드 렌더링) | React 19 + Vite 7 (SPA) |
| 백엔드 | Tomcat 8.x + Java | Supabase (서버리스) |
| 데이터베이스 | MySQL / Oracle | Supabase PostgreSQL |
| 인증 | 세션 기반 (loginPro.jsp) | Supabase Auth (JWT) |
| 결제 | (자체 구현) | PortOne V2 SDK |
| 호스팅 | 자체 서버 (competency.or.kr) | GitHub Pages |
| 차트 | (확인 필요) | Chart.js + react-chartjs-2 |
| 스타일 | 개별 CSS (reset.css 등) | CSS 변수 기반 디자인 시스템 |
| 라우팅 | JSP 파일 직접 접근 | react-router-dom v6 (SPA) |

---

## 5. 파일 규모 비교

| 항목 | 기존 (Tomcat/JSP) | 신규 (React) |
|------|-------------------|-------------|
| 페이지 파일 | ~96개 JSP | 41개 JSX |
| 스타일 파일 | ~20개 CSS | 11개 CSS |
| JS 유틸리티 | (JSP 내장) | 3개 JS (auth, supabase, portone) |
| 데이터 파일 | (DB 직접 접근) | 1개 JS (competencyInfo.js) |
| 컴포넌트 | (없음, 각 JSP 독립) | 10개 JSX (재사용 컴포넌트) |
| 컨텍스트 | (없음) | 2개 JSX (Auth, Toast) |
| **총 소스 파일** | **~120개** | **68개** |

---

## 6. 핵심 알고리즘 보존 확인

### 6.1 문항 추출 알고리즘 (extract.jsp → generateQuestionPairs)
- 8영역 x 14문항 = 112문항 풀
- 영역별 7개 표준문항 랜덤 추출 (중복 불가)
- 나머지 7개 비교문항 풀로 활용
- 56쌍 크로스영역 매칭 (i≠j)
- 비교문항 중복 사용 최대 2회 제한
- **검증**: 레거시 JSP 로직과 1:1 동일 ✓

### 6.2 결과 산출 알고리즘 (updateEval.jsp → calculateResults)
```
점수[표준문항_영역] += std_point
점수[비교문항_영역] += (30 - std_point)
```
- **검증**: 레거시 JSP 로직과 동일 ✓

### 6.3 NCS 변환 알고리즘 (result.jsp → calcNCS)
- 8대 역량 점수를 NCS 10대 직업기초능력 점수로 변환
- 가중 평균 방식 (역량별 매핑 비율 적용)
- **검증**: 레거시 JSP 299~320행과 동일 ✓

---

## 7. 오늘 수행한 작업

| 시간 | 작업 내용 |
|------|----------|
| - | 프로젝트 전체 구조 파악 (react-app + tomcat) |
| - | 소스코드 전수 조사 (75개 파일 분석) |
| - | 마이그레이션 완료 현황 확인 |
| - | 기능 완성도 평가 (85%) |
| - | 프로젝트 점검 보고서 작성 |
| - | 개발일지 작성 |
| - | Git 초기화 및 GitHub 커밋 & 푸시 |
| - | React 앱 빌드 & 배포 |

---

## 8. 향후 계획 (TODO)

### 단기 (즉시)
- [ ] Supabase RPC 함수 `get_average_scores()` 생성 (ResultAvg.jsx용)
- [ ] Dashboard.jsx의 `profiles` → `user_profiles` 테이블명 확인/수정
- [ ] Google Analytics 적용 (기존 ganalytics.jsp 대체)

### 중기
- [ ] TypeScript 전환 (JSX → TSX)
- [ ] 라우트 기반 코드 스플리팅 (React.lazy + Suspense)
- [ ] Error Boundary 전역 적용
- [ ] 단위/통합 테스트 작성 (Vitest)

### 장기
- [ ] SEO 최적화 (메타 태그, OG 태그)
- [ ] PWA 지원 (Service Worker)
- [ ] 접근성(a11y) 전면 점검
- [ ] Tomcat 레거시 서버 완전 폐기

---

*작성자: Claude Code (자동 생성)*
*프로젝트 경로: D:\competency*
*GitHub: https://github.com/aebonlee/competency*
